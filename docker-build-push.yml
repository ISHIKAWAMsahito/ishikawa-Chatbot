steps:
  # --------------------------------------------------
  # ステップ1: リポジトリのコードをチェックアウト
  # --------------------------------------------------
  # GitHub Actionsの仮想マシン上に、リポジトリのコードをダウンロードします
  - name: コードをチェックアウト
    uses: actions/checkout@v4

  # --------------------------------------------------
  # ステップ2: Docker Hubへのログイン
  # --------------------------------------------------
  # GitHub Secretsに保存した機密情報を使って、Docker Hubにログインします
  - name: Docker Hubにログイン
    uses: docker/login-action@v3
    with:
      username: ${{ secrets.DOCKER_USERNAME }} # GitHub SecretsのDOCKER_USERNAME
      password: ${{ secrets.DOCKERHUB_TOKEN }}# GitHub SecretsのDOCKER_PASSWORD

  # --------------------------------------------------
  # ステップ3: Dockerイメージのビルドとプッシュ
  # --------------------------------------------------
  # Dockerfile (context: .) を元にイメージをビルドし、
  # ログインしたDocker Hubにプッシュします。
  - name: イメージをビルド＆プッシュ
    uses: docker/build-push-action@v5
    with:
      context: .         # Dockerfileがある場所 (リポジトリのルート)
      push: true         # trueにすると、ビルド後にプッシュまで実行
      tags: ishikawamasahito/ishikawa-chatbot:latest # Docker Hubでのイメージ